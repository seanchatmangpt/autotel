# 7T Technique Examples Makefile
# Demonstrates first principles of sub-10ns execution

CC = gcc
CFLAGS = -O3 -march=native -mtune=native -Wall -Wextra -std=c99
LDFLAGS = -lm

# 7T Technique Examples
TARGETS = 7T_EXAMPLES_INTERNING 7T_EXAMPLES_BIT_VECTORS 7T_EXAMPLES_SIMD 7T_EXAMPLES_HASH_JOINS

# All examples
all: $(TARGETS)
	@echo "âœ… All 7T technique examples built successfully"

# String Interning Example
7T_EXAMPLES_INTERNING: 7T_EXAMPLES_INTERNING.c
	$(CC) $(CFLAGS) -o $@ $< $(LDFLAGS)
	@echo "ðŸ”§ Built string interning example"

# Bit Vector Logic Example
7T_EXAMPLES_BIT_VECTORS: 7T_EXAMPLES_BIT_VECTORS.c
	$(CC) $(CFLAGS) -o $@ $< $(LDFLAGS)
	@echo "ðŸ”§ Built bit vector logic example"

# SIMD Batching Example
7T_EXAMPLES_SIMD: 7T_EXAMPLES_SIMD.c
	$(CC) $(CFLAGS) -o $@ $< $(LDFLAGS)
	@echo "ðŸ”§ Built SIMD batching example"

# Hash Joins Example
7T_EXAMPLES_HASH_JOINS: 7T_EXAMPLES_HASH_JOINS.c
	$(CC) $(CFLAGS) -o $@ $< $(LDFLAGS)
	@echo "ðŸ”§ Built hash joins example"

# Run all examples
run-all: $(TARGETS)
	@echo ""
	@echo "ðŸš€ Running All 7T Technique Examples"
	@echo "===================================="
	@echo ""
	@echo "1. String Interning (Collapsing Entropy)"
	@echo "========================================"
	./7T_EXAMPLES_INTERNING
	@echo ""
	@echo "2. Bit Vector Logic (Boolean Algebra as Linear Operations)"
	@echo "=========================================================="
	./7T_EXAMPLES_BIT_VECTORS
	@echo ""
	@echo "3. SIMD Batching (Data Parallelism)"
	@echo "==================================="
	./7T_EXAMPLES_SIMD
	@echo ""
	@echo "4. Hash Joins (Constant-Time Relationship Resolution)"
	@echo "===================================================="
	./7T_EXAMPLES_HASH_JOINS
	@echo ""
	@echo "âœ… All 7T technique examples completed"

# Run individual examples
run-interning: 7T_EXAMPLES_INTERNING
	@echo "ðŸš€ Running String Interning Example"
	@echo "==================================="
	./7T_EXAMPLES_INTERNING

run-bit-vectors: 7T_EXAMPLES_BIT_VECTORS
	@echo "ðŸš€ Running Bit Vector Logic Example"
	@echo "==================================="
	./7T_EXAMPLES_BIT_VECTORS

run-simd: 7T_EXAMPLES_SIMD
	@echo "ðŸš€ Running SIMD Batching Example"
	@echo "================================"
	./7T_EXAMPLES_SIMD

run-hash-joins: 7T_EXAMPLES_HASH_JOINS
	@echo "ðŸš€ Running Hash Joins Example"
	@echo "============================="
	./7T_EXAMPLES_HASH_JOINS

# Performance benchmarks
benchmark: $(TARGETS)
	@echo ""
	@echo "ðŸ“Š 7T Technique Performance Benchmarks"
	@echo "======================================"
	@echo ""
	@echo "Running performance benchmarks for all techniques..."
	@echo "This will measure entropy reduction and speedup factors."
	@echo ""
	./7T_EXAMPLES_INTERNING | grep -E "(Compression|Speedup|Entropy)"
	@echo ""
	./7T_EXAMPLES_BIT_VECTORS | grep -E "(Compression|Speedup|Entropy)"
	@echo ""
	./7T_EXAMPLES_SIMD | grep -E "(Speedup|Entropy)"
	@echo ""
	./7T_EXAMPLES_HASH_JOINS | grep -E "(Speedup|Entropy)"

# Clean build artifacts
clean:
	rm -f $(TARGETS)
	@echo "ðŸ§¹ Cleaned build artifacts"

# Show help
help:
	@echo "7T Technique Examples Makefile"
	@echo "=============================="
	@echo ""
	@echo "Available targets:"
	@echo "  all              - Build all examples"
	@echo "  run-all          - Build and run all examples"
	@echo "  run-interning    - Run string interning example"
	@echo "  run-bit-vectors  - Run bit vector logic example"
	@echo "  run-simd         - Run SIMD batching example"
	@echo "  run-hash-joins   - Run hash joins example"
	@echo "  benchmark        - Run performance benchmarks"
	@echo "  clean            - Clean build artifacts"
	@echo "  help             - Show this help"
	@echo ""
	@echo "First Principles Demonstrated:"
	@echo "  1. String Interning: Shannon's Information Theory"
	@echo "  2. Bit Vector Logic: Boolean Algebra as Linear Operations"
	@echo "  3. SIMD Batching: Von Neumann Bottleneck Mitigation"
	@echo "  4. Hash Joins: Constant-Time Relationship Resolution"
	@echo ""
	@echo "Example usage:"
	@echo "  make run-all     # Run all examples"
	@echo "  make benchmark   # Performance analysis"

.PHONY: all run-all run-interning run-bit-vectors run-simd run-hash-joins benchmark clean help 