# Telemetry-First Capabilities in AutoTel

## Overview

AutoTel is designed as a telemetry-first workflow automation framework. Every workflow execution, service task, and business rule task is instrumented for observability using OpenTelemetry (OTEL) concepts. This enables deep introspection, debugging, and analytics for all automated processes.

## Key Features

- **Workflow-Level Telemetry**: Every workflow run is wrapped in a top-level OTEL span, capturing start/end time, status, and all relevant metadata.
- **Task-Level Telemetry**: Each service task and business rule task is instrumented as a child span, with detailed attributes and events.
- **Event Tracking**: All significant events (task started, completed, error, DMN decision, etc.) are recorded as OTEL events within spans.
- **Span Hierarchy**: Telemetry spans are structured hierarchically, with the workflow span as the parent and all task spans as children.
- **Schema-Driven Telemetry**: All telemetry data is validated and described using LinkML schemas, ensuring consistency and enabling downstream analytics.
- **Exportable Traces**: Telemetry can be exported in JSON or other formats for integration with observability tools, dashboards, or audits.

## Why Telemetry is the Only Source of Truth

> **LLM coding agents (like GPT-4, Copilot, etc.) are not always truthful.**
>
> - LLMs can hallucinate, make up code, or describe behaviors that do not actually exist in the running system.
> - Documentation, comments, and even test code generated by LLMs may not reflect what really happens at runtime.
> - Only telemetry—recorded automatically by the system as it runs—provides an objective, unalterable record of what actually happened.

**Telemetry is the one thing an LLM agent cannot fake or lie about.**

- Telemetry is generated by the system itself, not by the LLM.
- It captures real events, timings, errors, and data flows as they occur.
- Reviewing telemetry is the only way to know for sure what the system did, regardless of what the LLM or documentation claims.

## Example: Telemetry Span Structure

```yaml
# Example instance of a workflow telemetry span (see workflow_telemetry_span.linkml.yaml)
span_id: "workflow-1234-5678"
name: "bpmn.workflow"
start_time: "2024-07-11T12:00:00Z"
end_time: "2024-07-11T12:00:05Z"
duration_ms: 5000.0
status: "SUCCESS"
attributes:
  key: "workflow.version"
  value: "1.2.3"
events:
  - name: "workflow.started"
    timestamp: "2024-07-11T12:00:00Z"
    attributes:
      key: "initiator"
      value: "cli"
  - name: "workflow.completed"
    timestamp: "2024-07-11T12:00:05Z"
    attributes:
      key: "result"
      value: "APPROVE"
workflow_id: "simple_process"
workflow_name: "Simple Service and Decision Workflow"
workflow_status: "COMPLETED"
workflow_data: '{"result": "APPROVE", "confidence": 85}'
child_spans:
  - span_id: "task-1"
    name: "bpmn.serviceTask"
    start_time: "2024-07-11T12:00:01Z"
    end_time: "2024-07-11T12:00:02Z"
    status: "SUCCESS"
    attributes:
      key: "service.name"
      value: "AnalyzeData"
    events:
      - name: "task.completed"
        timestamp: "2024-07-11T12:00:02Z"
        attributes:
          key: "result"
          value: "analysis_result"
  - span_id: "task-2"
    name: "bpmn.businessRuleTask"
    start_time: "2024-07-11T12:00:03Z"
    end_time: "2024-07-11T12:00:04Z"
    status: "SUCCESS"
    attributes:
      key: "decision.ref"
      value: "Decision_1"
    events:
      - name: "dmn.decision.completed"
        timestamp: "2024-07-11T12:00:04Z"
        attributes:
          key: "decision"
          value: "APPROVE"
```

## How LinkML Powers Telemetry

- **Schema-Driven**: All telemetry data is described and validated using LinkML schemas (see `workflow_telemetry_span.linkml.yaml`).
- **Documentation & Examples**: The schema includes rich documentation and concrete examples for every field, making telemetry self-explanatory.
- **Interoperability**: LinkML enables easy export, validation, and integration with other tools and data pipelines.

## Why Telemetry-First?

- **Debuggability**: Every workflow and task is traceable, with full context for every execution.
- **Auditability**: All decisions and actions are recorded, supporting compliance and review.
- **Analytics**: Telemetry data can be analyzed for performance, bottlenecks, and optimization opportunities.
- **Extensibility**: New task types, events, or attributes can be added to the schema as the system evolves.

---

For more details, see the LinkML schema: `workflow_telemetry_span.linkml.yaml`. 